<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Introduction</title>
	
	<meta name="author" content="Jonny W">

	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Le styles -->
	<link href="http://jonnnnyw.github.io/php-phantomjs/assets/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="http://jonnnnyw.github.io/php-phantomjs/assets/resources/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="http://jonnnnyw.github.io/php-phantomjs/assets/resources/syntax/syntax.css" rel="stylesheet">
	<link href="http://jonnnnyw.github.io/php-phantomjs/assets/css/style.css" rel="stylesheet">

	<!-- Le fav and touch icons -->
	<!-- Update these with your own images
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->

	<link rel="alternate" type="application/rss+xml" title="" href="http://jonnnnyw.github.io/php-phantomjs/feed.xml">

   <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        
        ga('create', 'UA-53289013-1', 'auto');
        ga('send', 'pageview');
    </script>

</head>

<body>
    
     

	<nav class="navbar navbar-default visible-xs" role="navigation" id="global-nav">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-parent="#global-nav" data-toggle="collapse" data-target="#navbar-collapse-main">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
			<button type="button" class="navbar-toggle version-toggle" data-parent="#global-nav" data-toggle="collapse" data-target="#navbar-collapse-version">
				<span class="sr-only">Toggle navigation</span>
				<span class="fa fa-terminal"><b>4.0</b> version</</span>
			</button>
    		
			<a class="navbar-brand" href="http://jonnnnyw.github.io/php-phantomjs/">
				<img src="http://jonnnnyw.github.io/php-phantomjs/assets/media/phantomjs-small.png" class="img-circle" />
				PHP PhantomJs
			</a>
		</div>
        
        <div class="panel">
            <!-- Collect the nav links, forms, and other content for toggling -->
    		<div class="collapse navbar-collapse" id="navbar-collapse-version">
    			<ul class="nav navbar-nav">
    				<li><a href="http://jonnnnyw.github.io/php-phantomjs/4.0/" title="Version 4.0" class="active"><b>4.0</b> version</a></li>
                    <li><a href="http://jonnnnyw.github.io/php-phantomjs/3.0/" title="Version 3.0"><b>3.0</b> version</a></li>
    			</ul>
    		</div><!-- /.navbar-collapse -->
        </div>
        
        <div class="panel">
    		<!-- Collect the nav links, forms, and other content for toggling -->
    		<div class="collapse navbar-collapse" id="navbar-collapse-main">
    			<ul class="nav navbar-nav">
        			
                    <li><a href="http://jonnnnyw.github.io/php-phantomjs/4.0/">Introduction</a></li>
                    
                    <li><a href="http://jonnnnyw.github.io/php-phantomjs/4.0/2-installation/">Installation</a></li>
                    
                    <li><a href="http://jonnnnyw.github.io/php-phantomjs/4.0/3-usage/">Usage</a></li>
                    
                    <li><a href="http://jonnnnyw.github.io/php-phantomjs/4.0/4-custom-scripts/">Custom Scripts</a></li>
                    
                    <li><a href="http://jonnnnyw.github.io/php-phantomjs/4.0/5-caching/">Caching</a></li>
                    
                    <li><a href="http://jonnnnyw.github.io/php-phantomjs/4.0/6-debugging/">Debugging</a></li>
                    
                    <li><a href="http://jonnnnyw.github.io/php-phantomjs/4.0/7-troubleshooting/">Troubleshooting</a></li>
                    
    			</ul>
    		</div><!-- /.navbar-collapse -->
        </div>
        
	</nav>
    
	<!-- version-menu-dropdown -->
	<div class="btn-group hidden-xs" id="nav-version">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
			<i class="fa fa-terminal"><b>4.0</b> version</i>
		</button>
		<ul class="dropdown-menu" role="menu">
		    <li><a href="http://jonnnnyw.github.io/php-phantomjs/4.0/" title="4.0 version" class="active"><b>4.0</b> version</a></li>
			<li><a href="http://jonnnnyw.github.io/php-phantomjs/3.0/" title="3.0 version"><b>3.0</b> version</a></li>
			<li class="divider"></li>
		</ul>
	</div>
    
	<!-- nav-menu-dropdown -->
	<div class="btn-group hidden-xs" id="nav-menu">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
			<i class="fa fa-bars"></i>
		</button>
		<ul class="dropdown-menu" role="menu">
		    
			<li><a href="http://jonnnnyw.github.io/php-phantomjs/4.0/"><i class="fa fa-folder"></i>Introduction</a></li>
			
			<li><a href="http://jonnnnyw.github.io/php-phantomjs/4.0/2-installation/"><i class="fa fa-folder"></i>Installation</a></li>
			
			<li><a href="http://jonnnnyw.github.io/php-phantomjs/4.0/3-usage/"><i class="fa fa-folder"></i>Usage</a></li>
			
			<li><a href="http://jonnnnyw.github.io/php-phantomjs/4.0/4-custom-scripts/"><i class="fa fa-folder"></i>Custom Scripts</a></li>
			
			<li><a href="http://jonnnnyw.github.io/php-phantomjs/4.0/5-caching/"><i class="fa fa-folder"></i>Caching</a></li>
			
			<li><a href="http://jonnnnyw.github.io/php-phantomjs/4.0/6-debugging/"><i class="fa fa-folder"></i>Debugging</a></li>
			
			<li><a href="http://jonnnnyw.github.io/php-phantomjs/4.0/7-troubleshooting/"><i class="fa fa-folder"></i>Troubleshooting</a></li>
			
			<li class="divider"></li>
			<li><a href="#"><i class="fa fa-arrow-up"></i>Top of Page</a></li>
		</ul>
	</div>


	<div class="col-sm-3 sidebar hidden-xs">
		<! -- sidebar.html -->
<header class="sidebar-header" role="banner">
	<a href="http://jonnnnyw.github.io/php-phantomjs/">
		<img src="http://jonnnnyw.github.io/php-phantomjs/assets/media/phantomjs.png" class="img-circle" />
	</a>
	<h3 class="title">
        <a href="http://jonnnnyw.github.io/php-phantomjs/">PHP PhantomJs</a>
    </h3>
</header>


<div id="bio" class="text-center">
	Run PhantomJS scripts through PHP
</div>


<div id="contact-list" class="text-center">

	<ul class="list-unstyled list-inline">
		
		<li>
            <iframe src="http://ghbtns.com/github-btn.html?user=jonnnnyw&repo=php-phantomjs&type=watch&count=true"
                allowtransparency="true" frameborder="0" scrolling="0" width="85" height="20"></iframe>
		</li>
		
		
		<li>
			<iframe src="http://ghbtns.com/github-btn.html?user=jonnnnyw&repo=php-phantomjs&type=fork&count=true"
                allowtransparency="true" frameborder="0" scrolling="0" width="83" height="20"></iframe>
		</li>
		
	</ul>

</div>
<! -- sidebar.html end -->

	</div>

    <p id="version-notice">You are currently viewing version <span>4.0</span> documentation.</p>

	<div class="col-sm-9 col-sm-offset-3">

		<div class="page-header">
  <h1>Introduction </h1>
</div>
	
<article>
    
	<div class="col-sm-10">
      
	  <div class="article_body">
	  <blockquote>
  <h4 id="important">Important</h4>
  <p>Currently when installing PHP PhantomJS on <strong>Linux OS</strong> you will need to compile your own version of PhantomJS for your system. This is due to an <a href="https://github.com/ariya/phantomjs/issues/12948">unresolved issue</a> with the PhantomJS Linux packages. An Ubuntu compiled version will be installed by default but this may not be compatible with your system.</p>
</blockquote>

<p>PHP PhantomJS is a flexible PHP library to load pages through the PhantomJS headless browser and return the page response. It is handy for testing websites that demand javascript support and also supports screen captures and PDF output.</p>

<h2 id="feature-list">Feature List</h2>

<ul>
  <li>Load webpages through the PhantomJS headless browser</li>
  <li>View detailed response data including page content, headers, status<br />
code etc.</li>
  <li>Handle redirects</li>
  <li>View javascript console errors</li>
  <li>View detailed PhantomJS debuged information</li>
  <li>Save screen captures to local disk</li>
  <li>Output web pages to PDF document</li>
  <li>Set viewport size</li>
  <li>Define screen capture x, y, width and height parameters</li>
  <li>Delay page rendering for a specified time</li>
  <li>Execute PhantomJS with command line options</li>
  <li>Easily build and run custom PhantomJS scripts</li>
</ul>

<h2 id="prerequisites">Prerequisites</h2>

<p>PHP PhantomJS requires PHP <strong>5.3.0</strong> or greater to run.</p>

<h2 id="installation">Installation</h2>

<p>It is recommended that you use Composer to install PHP PhantomJS. First, add the following to your projectâ€™s <code>composer.json</code> file:</p>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml">    
    <span class="c1">#composer.json</span>

    <span class="s">&quot;scripts&quot;</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span>
        <span class="s">&quot;post-install-cmd&quot;</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span>
            <span class="s">&quot;PhantomInstaller\\Installer::installPhantomJS&quot;</span>
        <span class="p-Indicator">],</span>
        <span class="s">&quot;post-update-cmd&quot;</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span>
            <span class="s">&quot;PhantomInstaller\\Installer::installPhantomJS&quot;</span>
        <span class="p-Indicator">]</span>
    <span class="p-Indicator">}</span>
    </code></pre></figure>

<p>This will ensure the latest version of PhantomJS is installed for your system, in your bin folder. If you havenâ€™t defined your bin folder in your composer.json, add the path:</p>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml">    
    <span class="c1">#composer.json</span>
    
    <span class="s">&quot;config&quot;</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span>
        <span class="s">&quot;bin-dir&quot;</span><span class="p-Indicator">:</span> <span class="s">&quot;bin&quot;</span>
    <span class="p-Indicator">}</span></code></pre></figure>

<p>Finally, install PHP PhantomJS from the root of your project:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">    
    <span class="c">#bash</span>
    
    <span class="nv">$ </span>composer require <span class="s2">&quot;jonnyw/php-phantomjs:4.*&quot;</span></code></pre></figure>

<p>If you would like to use another installation method or would like to see more detailed installation instructions, see the <a href="http://jonnnnyw.github.io/php-phantomjs/4.0/installation/">installation</a> documentation.</p>

<blockquote>
  <h4 id="important-1">Important</h4>
  <p>By default the PhantomJS library will look for the PhantomJS executable in the bin folder relative to where your script is running <code>~/bin/phantomjs</code>. If the executable cannot be found or if the path to your PhantomJS executable differs from the default location, for example you have installed PhantomJS globally, you will need to define the path to your PhantomJS executable manually.</p>

  <p><code>$client-&gt;getEngine()-&gt;setPath('/path/to/phantomjs');</code></p>
</blockquote>

<h2 id="basic-usage">Basic Usage</h2>

<p>The following illustrates how to make a basic GET request and output the page content:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="x">    </span><span class="cp">&lt;?php</span>

    <span class="k">use</span> <span class="nx">JonnyW\PhantomJs\Client</span><span class="p">;</span>

    <span class="nv">$client</span> <span class="o">=</span> <span class="nx">Client</span><span class="o">::</span><span class="na">getInstance</span><span class="p">();</span>

    <span class="sd">/** </span>
<span class="sd">     * @see JonnyW\PhantomJs\Message\Request </span>
<span class="sd">     **/</span>
    <span class="nv">$request</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">getMessageFactory</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">createRequest</span><span class="p">(</span><span class="s1">&#39;http://jonnyw.me&#39;</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">);</span>

    <span class="sd">/** </span>
<span class="sd">     * @see JonnyW\PhantomJs\Message\Response </span>
<span class="sd">     **/</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">getMessageFactory</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">createResponse</span><span class="p">();</span>

    <span class="c1">// Send the request</span>
    <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">(</span><span class="nv">$request</span><span class="p">,</span> <span class="nv">$response</span><span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getStatus</span><span class="p">()</span> <span class="o">===</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>

        <span class="c1">// Dump the requested page content</span>
        <span class="k">echo</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getContent</span><span class="p">();</span>
    <span class="p">}</span>
    </code></pre></figure>

<p>Saving a screen capture to local disk:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="x">    </span><span class="cp">&lt;?php</span>

    <span class="k">use</span> <span class="nx">JonnyW\PhantomJs\Client</span><span class="p">;</span>

    <span class="nv">$client</span> <span class="o">=</span> <span class="nx">Client</span><span class="o">::</span><span class="na">getInstance</span><span class="p">();</span>
    
    <span class="nv">$width</span>  <span class="o">=</span> <span class="mi">800</span><span class="p">;</span>
    <span class="nv">$height</span> <span class="o">=</span> <span class="mi">600</span><span class="p">;</span>
    <span class="nv">$top</span>    <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nv">$left</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    
    <span class="sd">/** </span>
<span class="sd">     * @see JonnyW\PhantomJs\Message\CaptureRequest</span>
<span class="sd">     **/</span>
    <span class="nv">$request</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">getMessageFactory</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">createCaptureRequest</span><span class="p">(</span><span class="s1">&#39;http://jonnyw.me&#39;</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">);</span>
    <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">setOutputFile</span><span class="p">(</span><span class="s1">&#39;/path/to/save/capture/file.jpg&#39;</span><span class="p">);</span>
    <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">setViewportSize</span><span class="p">(</span><span class="nv">$width</span><span class="p">,</span> <span class="nv">$height</span><span class="p">);</span>
    <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">setCaptureDimensions</span><span class="p">(</span><span class="nv">$width</span><span class="p">,</span> <span class="nv">$height</span><span class="p">,</span> <span class="nv">$top</span><span class="p">,</span> <span class="nv">$left</span><span class="p">);</span>

    <span class="sd">/** </span>
<span class="sd">     * @see JonnyW\PhantomJs\Message\Response </span>
<span class="sd">     **/</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">getMessageFactory</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">createResponse</span><span class="p">();</span>

    <span class="c1">// Send the request</span>
    <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">(</span><span class="nv">$request</span><span class="p">,</span> <span class="nv">$response</span><span class="p">);</span>
    </code></pre></figure>

<p>Outputting a page as PDF:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="x">    </span><span class="cp">&lt;?php</span>

    <span class="k">use</span> <span class="nx">JonnyW\PhantomJs\Client</span><span class="p">;</span>

    <span class="nv">$client</span> <span class="o">=</span> <span class="nx">Client</span><span class="o">::</span><span class="na">getInstance</span><span class="p">();</span>

    <span class="sd">/** </span>
<span class="sd">     * @see JonnyW\PhantomJs\Message\PdfRequest</span>
<span class="sd">     **/</span>
    <span class="nv">$request</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">getMessageFactory</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">createPdfRequest</span><span class="p">(</span><span class="s1">&#39;http://jonnyw.me&#39;</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">);</span>
    <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">setOutputFile</span><span class="p">(</span><span class="s1">&#39;/path/to/save/pdf/document.pdf&#39;</span><span class="p">);</span>
    <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">setFormat</span><span class="p">(</span><span class="s1">&#39;A4&#39;</span><span class="p">);</span>
    <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">setOrientation</span><span class="p">(</span><span class="s1">&#39;landscape&#39;</span><span class="p">);</span>
    <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">setMargin</span><span class="p">(</span><span class="s1">&#39;1cm&#39;</span><span class="p">);</span>

    <span class="sd">/** </span>
<span class="sd">     * @see JonnyW\PhantomJs\Message\Response </span>
<span class="sd">     **/</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">getMessageFactory</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">createResponse</span><span class="p">();</span>

    <span class="c1">// Send the request</span>
    <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">(</span><span class="nv">$request</span><span class="p">,</span> <span class="nv">$response</span><span class="p">);</span>
    </code></pre></figure>

<p>For more detailed examples see the <a href="http://jonnnnyw.github.io/php-phantomjs/4.0/usage/">usage</a> section, or you can <a href="http://jonnnnyw.github.io/php-phantomjs/4.0/custom-scripts/">create your own custom scripts</a>.</p>


	  </div>

    </div>

    <div class="clearfix"></div>
    
    <hr>
    <ul class="pager">
        
        <li class="previous"><a href="http://jonnnnyw.github.io/php-phantomjs/4.0/2-installation/" title="Installation">&larr; Installation</a></li>
        
        
    </ul>

	
    
</article>




		<footer>
			<hr/>
			<p>
				&copy; 2015 PHP PhantomJs
			</p>
		</footer>
	</div>

	<script type="text/javascript" src="http://jonnnnyw.github.io/php-phantomjs/assets/resources/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="http://jonnnnyw.github.io/php-phantomjs/assets/resources/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="http://jonnnnyw.github.io/php-phantomjs/assets/js/app.js"></script>
	
</body>
</html>

